/*
 VideoStir Player JavaScript library.
 @author Alexey Bass (@alexey_bass)
 @copyright VideoStir Ltd., http://videostir.com
*/
VS.jQuery(document).ready(function(){VS.Player.init()});
VS.Player={Version:"2.13.0",_containerId:"videostir-player",_containerInnerId:"videostir-player-inner",_preloadContainerId:"videostir-player-preload",_playerUrl:"http://8b249279a23ebe6382fe-bdbb90f389a017a4d0321ddd645160f1.r73.cf1.rackcdn.com/swf/061014/vs.player.swf",_mobileNavigatorRegexp:/webOS|iPhone|iPad|iPod|BlackBerry|Android/i,_mozilaRegExp:/Firefox/,_pause:!1,_parallel:"false",_quiet:!1,_playbackPosition:"",_debug:!1,init:function(){},parseLegacyVideo:function(c){if(-1!==c.indexOf("://videostir.com/")){var d=
c.match(/\/go\/video\/([a-z0-9]{32})/);return d&&2===d.length?d[1]:c}return c},show:function(c,d,b,a,e){e=e||{};e.loged&&(VS.Player._debug=!0);VS.Player.loging("Player version is "+VS.Player.Version);!0!=VS.Player._parallel&&VS.Player.isExists()&&VS.Player.remove();VS.jQuery(document).unbind("atFrame.vs-player");VS.Player._containerId+=a.substr(0,3);VS.Player._containerInnerId+=a.substr(0,4);VS.Player._preloadContainerId+=a.substr(0,5);if(!VS.Player._mobileNavigatorRegexp.test(navigator.userAgent)||
e.youtube){a=VS.Player.parseLegacyVideo(a);VS.Stats.setHash(a);var f=new VS.Player.Cookie(a),g=f.getViewsCount();if(e["fake-show-every"]&&Math.floor(Math.random()*e["fake-show-every"]+1)===parseInt(e["fake-show-every"]))VS.Stats.trigger("jsFakeShow"),VS.Player._fakeShow=!0,f=new VS.Player.Cookie(a),f.addViewsCount();else{if(e["disable-player-threshold"]){if(g>=e["disable-player-threshold"])return;delete e["disable-player-threshold"]}var h=VS.jQuery.extend({},e);e.videostir_views=g;delete h.videostir_views;
var j=VS.Player.makeCss(c,d,b),l=VS.Player.makePlayerParams(a,e);cur_url=window.location.href;VS.Stats.trigger("jsShow",VS.jQuery.extend({},{position:c,width:d,height:b},h));VS.Stats.trigger("embedOn",cur_url);!0==VS.Player._quiet&&VS.Stats.trigger("silent","");VS.jQuery(document).ready(function(){VS.jQuery("body").append('<div id="'+VS.Player._containerId+'"></div>');var a=VS.jQuery("#"+VS.Player._containerId);a.css(j);var c="",h;for(h in j)c=c+(h+": "+j[h]+"; ");if(VS.jQuery.browser.msie){VS.swfobject.createCSS("#"+
VS.Player._containerId,c);document.getElementById(VS.Player._containerId).setAttribute("style",c)}a.append('<div id="'+VS.Player._containerInnerId+'"></div>');if(e.youtube&&VS.Player._mobileNavigatorRegexp.test(navigator.userAgent)){VS.Player.showYoutube(d,b,e.youtube);delete e.youtube}else{VS.swfobject.embedSWF(VS.Player.getPlayerUrl(VS.Player.isSecure()),VS.Player._containerInnerId,d,b,"9.0.0","",l.flashvars,l.params,l.attributes);VS.Player.addLabel(e,a);f.addViewsCount()}})}}},addLabel:function(c,
d){if(void 0!==c.label){var b=c.label;if(void 0!==b.name||void 0!==b.title){var a={name:"",title:"","font-family":"Tahoma","font-size":11,"font-color":"white","bg-color":"black","bg-opacity":0.8,"start-sec":3,"remove-sec":10},e=0,f="",g="1em";void 0!==b.name&&void 0!==b.title&&(f="<br>",g="2em");for(key in b)switch(key){case "name":e=b.name.length;break;case "title":e<b.title.length&&(e=b.title.length);break;case "font-family":a["font-family"]=b["font-family"];break;case "font-size":a["font-size"]=
parseInt(b["font-size"]);break;case "font-color":a["font-color"]=b["font-color"];break;case "bg-color":a["bg-color"]=b["bg-color"];break;case "bg-opacity":a["bg-opacity"]=parseFloat(b["bg-opacity"]);break;case "start-sec":a["start-sec"]=parseInt(b["start-sec"]);break;case "remove-sec":a["remove-sec"]=parseInt(b["remove-sec"])}var h;h='<div id="player-title" style=" text-align:center;border-radius: 7px;'+("font-family: "+a["font-family"]+";");h+="font-size:"+a["font-size"]+"pt;";h+="color:"+a["font-color"]+
";";h+="background-color:"+a["bg-color"]+"; ";h+="opacity:"+a["bg-opacity"]+";";h=h+("height: "+g+"; width: "+e+"ex; margin-top: 5px; margin-bottom: 5px; padding-top: 5px; padding-bottom: 5px;")+'position: absolute;left:0px;top:0px; pointer-events:none;"><strong>'+(b.name+f+b.title);d.append(h+"</strong></div>");b=document.getElementById("player-title");e=window.getComputedStyle(b,null).getPropertyValue("width");b.style.left=parseInt(VS.jQuery("#"+VS.Player._containerId).width())/2-(parseInt(e)/2+
15)+"px";b.style.top=2*(VS.jQuery("#"+VS.Player._containerId).height()/3)+"px";b=VS.jQuery("#player-title");b.hide();b.delay(1E3*parseInt(a["start-sec"])).fadeIn(2E3);b.delay(1E3*parseInt(a["remove-sec"])).fadeOut(2E3)}}},showYoutube:function(c,d,b){var a=VS.jQuery("#"+VS.Player._containerId).prepend('<div class="toolbar" style="text-align: right;"><button onclick="VS.Player.remove();" style="font-size: 12pt;">[&times;] Close</button></div>');a.height(a.height()+a.find("div.toolbar").height());VS.jQuery("#"+
VS.Player._containerInnerId).append('<iframe width="'+c+'" height="'+d+'" src="http'+(VS.Player.isSecure()?"s":"")+"://www.youtube.com/embed/"+b+'?rel=0" frameborder="0" allowfullscreen></iframe>')},createPreloadContainer:function(){0===VS.Player._preloadContainerCounter&&VS.jQuery("body").append('<div id="'+VS.Player._preloadContainerId+'"></div>')},removePreloadContainer:function(){var c=VS.jQuery("#"+VS.Player._preloadContainerId);if(c.length){for(var d=c.find("> *"),b=0,a=d.length;b<a;b++)VS.swfobject.removeSWF(VS.jQuery(d[b]).attr("id"));
c.remove()}},_preloadContainerCounter:0,addPreloadingItemContainer:function(){VS.Player._preloadContainerCounter++;var c=VS.Player._preloadContainerId+"-item-"+VS.Player._preloadContainerCounter;VS.jQuery("#"+VS.Player._preloadContainerId).append('<div id="'+c+'"></div>');return c},on:function(c,d){return{show:function(){var b=arguments;VS.Player.createPreloadContainer();VS.swfobject.embedSWF(VS.Player.getPlayerUrl(VS.Player.isSecure()),VS.Player.addPreloadingItemContainer(),1,1,"9.0.0","",{videoHash:VS.Player.parseLegacyVideo(b[3]),
https:VS.Player.isSecure()?1:0,autop:!1},{menu:"false"},{menu:"false"});VS.jQuery(c).on(d,function(){VS.Player.removePreloadContainer();VS.Player.show.apply(VS.Player,b)})}}},preload:function(c){VS.jQuery(document).ready(function(){VS.Stats.trigger("jsPreload");VS.Player.createPreloadContainer();VS.swfobject.embedSWF(VS.Player.getPlayerUrl(VS.Player.isSecure()),VS.Player.addPreloadingItemContainer(),1,1,"9.0.0","",{videoHash:c,https:VS.Player.isSecure()?1:0,autop:!1},{menu:"false"},{menu:"false"})})},
remove:function(){VS.swfobject.removeSWF(VS.Player._containerInnerId);VS.jQuery("#"+VS.Player._containerId).remove()},isExists:function(){return VS.jQuery("#"+VS.Player._containerId).length?!0:!1},makeCss:function(c,d,b){var a={left:"auto",top:"auto",right:"auto",bottom:"auto",position:"fixed","z-index":"1000000",margin:"0",padding:"0",width:d+"px",height:b+"px",opacity:"1.0"};VS.Player._mozilaRegExp.test(navigator.userAgent)&&(a.opacity="0.95");if("string"===typeof c)switch(c){case "top-left":a.top=
"0px";a.left="0px";break;case "top-right":a.top="0px";a.right="0px";break;case "bottom-left":a.bottom="0px";a.left="0px";break;case "bottom-right":a.bottom="0px";a.right="0px";break;case "center":var c=VS.jQuery(window),e="number"===typeof window.innerHeight?window.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:c.height();a.left=(c.width()-d)/2+c.scrollLeft()+"px";a.top=(e-b)/2+c.scrollTop()+"px";a.right="auto";a.bottom="auto"}else if("object"===
typeof c){for(e in c)switch(e){case "left":case "top":case "right":case "bottom":c[e]=String(c[e]);!isNaN(parseFloat(c[e]))&&isFinite(c[e])&&(c[e]+="px");break;case "object":obj=VS.jQuery('[name="'+c[e]+'"]');objPos=VS.jQuery(obj).get(0).getBoundingClientRect();a.top=objPos.top;a.left=objPos.left;break;case "offsetTop":a.top-=-c[e];break;case "offsetLeft":a.left-=-c[e]}VS.jQuery.extend(a,c)}else a.left="0px",a.top="0px";VS.jQuery.browser.msie&&"BackCompat"==document.compatMode&&(a.top.length&&"auto"!=
a.top?(a.position="absolute !important",a.top='expression(((document.documentElement.scrollTop || document.body.scrollTop) + (!this.offsetHeight && 0)) + "px")'):a.bottom.length&&"auto"!=a.bottom&&(a.position="absolute !important",a.top='expression(((document.documentElement.scrollTop || document.body.scrollTop) + (document.documentElement.clientHeight || document.body.clientHeight) - this.offsetHeight) + "px")',a.bottom="auto"));return a},makePlayerParams:function(c,d){var b={flashvars:{},params:{},
attributes:{}};b.flashvars.videoHash=encodeURIComponent(c);b.flashvars.https=VS.Player.isSecure()?1:0;b.flashvars.videostir_referer=encodeURIComponent(VS.Player.getReferrer());b.flashvars.vspv=VS.Player.Version;b.params.wmode="transparent";b.params.quality="high";b.params.allowScriptAccess="always";b.params.menu=!1;b.attributes.wmode="transparent";b.attributes.quality="high";b.attributes.allowScriptAccess="always";b.attributes.menu=!1;for(var a in d)switch(a){case "auto-play":b.flashvars.autop=d[a];
break;case "auto-play-limit":b.flashvars.maxPlayedTimes=d[a];break;case "playback-delay":b.flashvars.delayS=d[a];break;case "on-finish":switch(d[a]){case "remove":b.flashvars.afterDone="close";break;case "play-button":b.flashvars.afterDone="bigPlayButton";break;case "blank":b.flashvars.afterDone="empty"}break;case "rotation":b.flashvars.rotationG=d[a];break;case "zoom":b.flashvars.zoomPerc=d[a]/100;break;case "offset-x":b.flashvars.offsetOnX=d[a];break;case "offset-y":b.flashvars.offsetOnY=d[a];break;
case "on-click-open-url":b.flashvars.linkTo=!0;b.flashvars.goButtonUrl=encodeURIComponent(0===d[a].indexOf("http")?d[a]:"http://"+d[a]);break;case "on-click-open-url-target":switch(d[a]){case "blank":b.flashvars.goButtonLogic="newWindow";break;case "self":b.flashvars.goButtonLogic="sameWindow"}break;case "on-click-open-url-button-position":b.flashvars.goButtonFrame=1;switch(d[a]){case "left":case "center":case "right":b.flashvars.goButtonLocation=d[a]}break;case "on-click-event":b.flashvars.linkTo=
!0;break;case "clip-fps":b.flashvars.clipFps=d[a];break;case "playback-freeze-frame":b.flashvars.freeze=d[a];break;case "brand-id":b.flashvars.brandId=d[a];break;case "brand-onclick-open-url":b.flashvars.brandOnclickOpenUrl=encodeURIComponent(0===d[a].indexOf("http")?d[a]:"http://"+d[a]);break;case "quiet":VS.Player._quiet=!0;b.flashvars.quiet=d[a];break;case "movement":var e=[];if(d[a].scenario){for(var f=0;f<d[a].scenario.length;f++)e.push(d[a].scenario[f][0]);e.length&&(VS.jQuery(document).bind("atFrame.vs-player",
{scenario:d[a].scenario},function(a,c){for(var e=0;e<a.data.scenario.length;e++)if(parseInt(c)===parseInt(a.data.scenario[e][0]))if("function"===typeof a.data.scenario[e][1])a.data.scenario[e][1].call(this,VS.jQuery("#"+VS.Player._containerId));else{var b=objPos=VS.jQuery("#"+VS.Player._containerId).get(0).getBoundingClientRect();"scroll-up"!=a.data.scenario[e][1]&&("scroll-down"!=a.data.scenario[e][1]&&"scroll-left"!=a.data.scenario[e][1]&&"scroll-right"!=a.data.scenario[e][1])&&(VS.jQuery("#"+VS.Player._containerId).css("top",
b.top),VS.jQuery("#"+VS.Player._containerId).css("left",b.left));var b="=5",f=50,d=1E3,g=null,r=null,s=null,p=a.data.scenario[e][1];e<a.data.scenario.length-1&&(d=a.data.scenario[e+1][0]-5);var q=1,b="=2",f=20;VS.Player._mozilaRegExp.test(navigator.userAgent)&&(f=40,q=1);switch(a.data.scenario[e][2]){case "very-fast":b="=10";break;case "fast":b="=4";break;case "medium":b="=2";break;case "slow":b="=1";q=10;break;case "very-slow":b="=1";q=25;break;default:b="=5"}a.data.scenario[e][3]&&(g=document.getElementById(a.data.scenario[e][3]),
a.data.scenario[e][4]&&(r=a.data.scenario[e][4]),a.data.scenario[e][5]&&(s=a.data.scenario[e][5]));var n="=0",o="=0";switch(p){case "scroll-down":n="+"+b;break;case "scroll-up":n="-"+b;break;case "scroll-left":o="-"+b;break;case "scroll-right":o="+"+b;break;case "move-left":o="-"+b;break;case "move-right":o="+"+b;break;case "move-up":n="-"+b;break;case "move-down":n="+"+b;break;case "move-diagonal-left-up":n="-"+b;o="-"+b;break;case "move-diagonal-left-down":n="+"+b;o="-"+b;break;case "move-diagonal-right-up":n=
"-"+b;o="+"+b;break;case "move-diagonal-right-down":n="+"+b,o="+"+b}var u=setInterval(function(){VS.Player._pause==true||VS.Player.Api.getCurrentFrame()>d||check_position(g,p,null,r,s)?clearInterval(u):p!="scroll-down"&&p!="scroll-up"&&p!="scroll-left"&&p!="scroll-right"?VS.jQuery("#"+VS.Player._containerId).animate({top:n,left:o},q):VS.jQuery("html,body").animate({scrollTop:n,scrollLeft:o},q)},f)}}),b.flashvars.framesToReport=e)}break;case "url-jumps":var g='<iframe id="videostir-jumps-container" frameborder="0"';
(!d[a].fullscreen||!0===d[a].fullscreen)&&VS.jQuery("html, body").css({width:"100%",height:"100%",margin:0,padding:0,overflow:"hidden"});d[a].css&&(g+=' style="'+d[a].css+'"');e=[];if(d[a].scenario){"start"===d[a].scenario[0][0]&&(g+=' src="'+d[a].scenario[0][1]+'"',d[a].scenario=d[a].scenario.slice(1));for(f=0;f<d[a].scenario.length;f++)"end"===d[a].scenario[f][0]?VS.jQuery(document).bind("playbackPosition.vs-player",{scenario:d[a].scenario[f]},function(a,b){if(parseInt(b)===100)a.data.scenario[1]===
"close"?window.close():window.location.href=a.data.scenario[1]}):(e.push(d[a].scenario[f][0]),VS.jQuery(document).bind("atFrame.vs-player",{scenario:d[a].scenario[f]},function(a,b){parseInt(b)===parseInt(a.data.scenario[0])&&VS.jQuery("#videostir-jumps-container").attr("src",a.data.scenario[1])}))}g+="></iframe>";VS.jQuery("body").append(g);b.flashvars.framesToReport=e;break;case "framesToReportAll":b.flashvars.framesToReportAll=d[a];1===d[a]&&VS.jQuery(document).bind("atFrame.vs-player",function(){});
break;default:b.flashvars[a]=d[a]}b.flashvars.freeze&&(b.flashvars.autop=!0,b.flashvars.maxPlayedTimes=1E4);VS.jQuery(document).bind("bigBtnPlay.vs-player",{},function(){VS.Player._quiet=false;VS.jQuery(document).trigger("bigPlay")});VS.jQuery(document).bind("btnPlay.vs-player",{},function(){VS.Player._quiet=false});VS.jQuery(document).bind("pause.vs-player",{},function(){VS.Player._pause=true});VS.jQuery(document).bind("play.vs-player",{},function(){VS.Player._pause=false});VS.jQuery(document).bind("remove.vs-player",
{},function(){VS.jQuery(document).unbind("atFrame.vs-player")});VS.jQuery(document).bind("playbackPosition.vs-player",{},function(a,b){VS.Player._playbackPosition=b;if(b>95){VS.jQuery("html,body").stop(true,false);VS.Player._pause=true;VS.jQuery(document).unbind("atFrame.vs-player")}});return b},getReferrer:function(){return window.location.href},getPlayerUrl:function(c){return c?"https"+VS.Player._playerUrl.replace(/\.r[0-9]{2}\./,".ssl.").substr(4):VS.Player._playerUrl},isSecure:function(){return"https:"===
document.location.protocol?!0:!1},loging:function(c){VS.Player._debug&&console.log(c)}};
VS.Player.Cookie=function(c){var d,b,a,e,f,g,h=function(a){var b=[0,0];if(-1!==a.indexOf("|")){var a=a.split("|"),e;for(e in a)b[e]=parseInt(a[e])}else b[0]=parseInt(a);return b};this.getViewsCount=function(){return e[0]};this.getLastViewed=function(){return e[1]};this.getFirstLastViewed=function(){return f[1]};this.addViewsCount=function(a){a=e[0]+(a||1)+"|"+Math.round((new Date).getTime()/1E3);VS.Player._fakeShow||(VS.jQuery.cookie(d,a,{expires:365}),e=a);if(1==e[0]||0==e[0])show=VS.Player._fakeShow?
1:2,session_id=VS.Stats._sessionId,a=show+"|"+Math.round((new Date).getTime()/1E3)+"|"+session_id,VS.jQuery.cookie(b,a,{expires:365}),f=a};this.addConversUrls=function(){cur_url=window.location.href;var b="";if(0==g[0])b=cur_url;else{for(i=0;i<g.length;i++)b+=g[i]+"|";b+=cur_url}VS.jQuery.cookie(a,b,{expires:365});g=h(b)};this.checkShow=function(){return 1==f[0]?!1:!0};this.check_vsf=function(){return 0==f[0]?!1:!0};this.check_vsc=function(){result=!1;cur_url=window.location.href;if(0!=g[0])for(i=
0;i<g.length;i++)g[i]===cur_url&&(result=!0);return result};this.getFirstSessionId=function(){return f[2]};d="vsv"+c;b="vsf"+c;a="vsc"+c;e=(e=VS.jQuery.cookie(d))?h(e):[0,0];f=(f=VS.jQuery.cookie(b))?h(f):[0,0,0,0,0];if(g=VS.jQuery.cookie(a)){var c=g,j=[0];if(-1!==c.indexOf("|")){var c=c.split("|"),l;for(l in c)j[l]=c[l]}else j[0]=c;g=j}else g=[0]};
VS.Player.Api={play:function(c){c=0<=c?c:VS.Player.Api.getCurrentFrame();try{return VS.swfobject.getObjectById(VS.Player._containerInnerId).play(c),!0}catch(d){}return!1},pause:function(){try{return VS.swfobject.getObjectById(VS.Player._containerInnerId).pause(),!0}catch(c){}return!1},getCurrentFrame:function(){try{return VS.swfobject.getObjectById(VS.Player._containerInnerId).getCurrentFrame()}catch(c){}return!1}};
(function(c,d,b){var a={_level:0,_statsUrl:VS.Player.isSecure()?"//videostir.com/stats/analytics/":"//stats.videostir.net/analytics/",_statsUrl1:VS.Player.isSecure()?"//secure.bwebi.co/videostir/get-stats.php":"//videostir.bwebi.biz/get-stats.php",_sendTimeout:200,_videoHash:"",_sessionId:0,_sequenceNumber:0,SEND_DISABLED:0,SEND_CONSOLE:1,SEND_SERVER:2,SEND_STATS:1,_stack:[],init:function(){a._sessionId=a.generateSessionId();a.bindListenners();c(b).ready(function(){a.trigger("jsDomReady")})},enable:function(b){a._level===
a.SEND_CONSOLE&&(b===a.SEND_SERVER?b=a._level+a.SEND_SERVER:b===a.SEND_DISABLED&&(b=a.SEND_CONSOLE));a._level=parseInt(b);a._conversionLogicAttached||a.attachConversionLogic();a._level&a.SEND_SERVER&&a.sendPendingEventsFromStack()},setHash:function(b){a._videoHash=a.findHash(b)},_conversionLogicAttached:!1,sendPendingEventsFromStack:function(){var b,c,d;for(b in a._stack)c=a._stack[b],d=c[0],0===d&&(c[0]=1,a.sendEvent(c[1],c[2],c[3],c[4],c[5]))},attachConversionLogic:function(){a._conversionLogicAttached=
!0;c(".vs-stats-conversion-onclick").on("click",function(b){a.triggerConversion(b)})},findHash:function(a){return(a=a.match(/(as-[a-z0-9]{32}|[a-z0-9]{32})/))&&2===a.length?a[1]:!1},generateSessionId:function(){return parseInt(Math.floor(428*Math.random()+11)+""+((new Date).getTime()+"").substr(6))},bindListenners:function(){c(b).bind("jsShow jsDomReady jsUnload jsFakeShow jsPreload initFlash startLoading finishLoading loadError pause play mute unmute remove playbackPosition gotoLink gotoHome onclick conversion unique empty silent bigPlay embedOn".split(" ").join(".vs-player ")+
".vs-player",function(b,c){a.log(b.type,c)});c(d).bind("beforeunload",function(){a.log("jsUnload")})},trigger:function(a,f){(f=f||!1)?c(b).trigger(a+".vs-player",[f]):c(b).trigger(a+".vs-player")},_conversionElement:null,triggerConversion:function(b){var f=c(b.currentTarget);a._conversionElement=f;f.is("a")&&b.preventDefault();b=b.currentTarget.nodeName;f.attr("vs-conversion-id")&&(b+=" conversion-id="+f.attr("vs-conversion-id"));a.trigger("conversion",b)},log:function(b,c,g){var g=g||a._level,h=
a._sequenceNumber++,j=(new Date).getTime()-VS._zeroTime,l=0;if(!a.isJunkEvent(b,j,c)){if(g&a.SEND_CONSOLE&&d.console){var m=a._stack.length?j-a._stack[a._stack.length-1][3]:0,m="("+(m&&(1E3<m?(m/1E3).toFixed(1)+" s":m+" ms"))+")";VS.Player.loging(a._videoHash,a._sessionId,h,j,m,b,c?c:"")}VS.Player._quiet&&"playbackPosition"==b&&(c+=":quiet");g&a.SEND_SERVER&&(a.sendEvent(a._videoHash,h,j,b,c),l=1);VS.Player._fakeShow&&a.sendEvent(a._videoHash,h,j,"jsFakeShow",c);g=new VS.Player.Cookie(a._videoHash);
unique=views=g.getViewsCount();a._stack.push([l,a._videoHash,h,j,b,c,unique]);"playbackPosition"===b&&"0"===c&&(g=new VS.Player.Cookie(a._videoHash),1===g.getViewsCount()&&a.trigger("unique"))}},isJunkEvent:function(b,c,d){var h=!1;if(!a._stack.length)return h;var j=a._stack[a._stack.length-1];"playbackPosition"===b?j[5]===d&&(h=!0):j[4]===b&&100>Math.abs(c-j[3])&&(h=!0);return h},sendEvent:function(b,f,g,h,j){var l=new VS.Player.Cookie(b);firstSessionId=l.getFirstSessionId();unique=views=l.getViewsCount();
sessionId="conversion"==h?firstSessionId:a._sessionId;if(1==a.SEND_STATS||3==a.SEND_STATS)c.ajax({type:"get",url:a._statsUrl,data:{h:b,s:a._sessionId,n:f,t:g,e:h,d:j,u:unique},async:"jsUnload"===h?!1:!0,crossDomain:!0,cache:!1,dataType:"jsonp",jsonp:"vs",jsonpCallback:"_",processData:!0,timeout:a._sendTimeout,fail:function(){d.log&&VS.Player.loging("sendEvent ajax fail",arguments)},complete:function(){"conversion"===h&&(a._conversionElement&&a._conversionElement.is("a"))&&(d.location=a._conversionElement.attr("href"),
a._conversionElement=null)}});2<=a.SEND_STATS&&c.ajax({type:"get",url:a._statsUrl1,data:{h:b,s:a._sessionId,n:f,t:g,e:h,d:j,u:unique},async:"jsUnload"===h?!1:!0,crossDomain:!0,cache:!1,dataType:"jsonp",jsonp:"vs",jsonpCallback:"_",processData:!0,timeout:a._sendTimeout,fail:function(){d.log&&VS.Player.loging("sendEvent ajax fail",arguments)},complete:function(){"conversion"===h&&(a._conversionElement&&a._conversionElement.is("a"))&&(d.location=a._conversionElement.attr("href"),a._conversionElement=
null)}})},markConversion_old:function(b){var c=new VS.Player.Cookie(b),d=Math.round(VS._zeroTime/1E3);0===c.getViewsCount()?(a.setHash(b),a.enable(a.SEND_SERVER),a.trigger("conversion",-1)):1===c.getViewsCount()&&108E3>d-c.getLastViewed()&&(a.setHash(b),a.enable(a.SEND_SERVER),a.trigger("conversion",1))},markConversion:function(b){var c=new VS.Player.Cookie(b),g=Math.round(VS._zeroTime/1E3);c.check_vsf()&&(!c.check_vsc()&&!(2<c.getViewsCount()))&&(c.checkShow()?1800<g-c.getLastViewed()||(cur_url=
d.location.href,a.setHash(b),a.enable(a.SEND_SERVER),a.trigger("conversion",cur_url),c.addConversUrls()):1<c.getViewsCount()||(a.setHash(b),a.enable(a.SEND_SERVER),a.trigger("conversion",-1),c.addConversUrls()))}};d.VS.Stats=a;a.init()})(VS.jQuery,window,document);
VS.Player.Playlist=function(c){function d(c,d){switch(c.type){case "finishLoading":"string"===typeof f[k-1].clip&&f[k-1].clip===a?VS.jQuery(document).trigger("next.vs-player-playlist"):e===b&&VS.jQuery(document).trigger("next.vs-player-playlist");break;case "playbackPosition":100===parseInt(d)&&(S.jQuery(document).unbind("atFrame.vs-player"),VS.jQuery("html,body").stop(!0,!1),VS.jQuery(document).trigger("next.vs-player-playlist"))}}var b="trigger",a="preload",e=c.settings.strategy||"default",f,g=
c.clips,c=[],h;switch(e){case "show-one-never-seen":var j;for(h in g)if("object"===typeof g[h].clip&&(j=g[h].clip[3],0===(new VS.Player.Cookie(j)).getViewsCount())){c.push(g[h]);break}break;case "random":c.push(g[Math.floor(Math.random()*g.length)]);break;case "random-weight":j=[];var l=0,m=0;for(h in g)l+=g[h].weight||0,j.push(l);l=Math.round(Math.random()*l);for(h in j)if(l<j[h]){m=h;break}c.push(g[m]);break;case b:for(h in g)(function(a){VS.jQuery("#"+g[a].target).bind(g[a].action+".videostir",
function(b){-1!==["mouseenter","mouseleave","mousemove","mouseout","mouseover"].indexOf(b.type)&&VS.jQuery("#"+g[a].target).unbind(".videostir");VS.Player.show.apply(VS.Player,g[a].clip.slice(0))})})(h),c.push(g[h]);break;default:c=g}f=c;var k=0;"loop-forever"==e&&(VS.Player._parallel=!0);if("parallel"==e){VS.Player._parallel=!0;var t=setInterval(function(){k>f.length-1&&clearInterval(t);k<f.length&&VS.Player.show.apply(VS.Player,f[k++].clip)},10)}else VS.jQuery(document).bind("next.vs-player-playlist",
function(){if(k<f.length)switch(typeof f[k].clip){case "string":switch(f[k].clip){case "pause":VS.Player.remove();setTimeout(function(){VS.jQuery(document).trigger("next.vs-player-playlist")},f[k].duration);k++;break;case "empty":VS.Stats.setHash(f[k].hash);VS.Stats.log("empty",null,VS.Stats.SEND_SERVER);k++;VS.jQuery(document).trigger("next.vs-player-playlist");break;case a:VS.Player.show("bottom-right",1,1,f[k].hash,{"auto-play":false});k++}break;default:switch(e){case b:VS.Player.show("bottom-right",
1,1,f[k].clip[3],{"auto-play":false});k++;break;case "parallel":break;default:VS.Player.show.apply(VS.Player,f[k].clip);k++}}else if(e=="loop-forever"){k=0;VS.jQuery(document).trigger("next.vs-player-playlist")}else VS.jQuery(document).unbind("finishLoading.vs-player playbackPosition.vs-player",d)});VS.jQuery(document).bind("finishLoading.vs-player playbackPosition.vs-player",d);f.length&&VS.jQuery(document).trigger("next.vs-player-playlist")};
function check_position(c,d,b,a,e){b=!1;if(c){var f=getOffsetRect(VS.jQuery("#"+VS.Player._containerId).get(0)),g=VS.jQuery("#"+VS.Player._containerId).width(),h=VS.jQuery("#"+VS.Player._containerId).height(),c=getOffsetRect(c),j=c.right-c.left,l=c.top-c.bottom,m=0,k=0;a&&(m=a);e&&(k=e);switch(d){case "move-right":f.left- -g-100-k>=c.left&&(b=!0);break;case "move-left":f.left- -70- -k<=c.left- -j&&(b=!0);break;case "move-down":f.top- -h-m>=c.top&&(b=!0);break;case "move-up":f.top- -0-m<=c.top- -l&&
(b=!0);break;case "move-diagonal-left-down":if(f.left- -70- -k<=c.left- -j||f.top- -h-m>=c.top)b=!0;break;case "move-diagonal-left-up":if(f.left- -70- -k<=c.left- -j||f.top- -0-m<=c.top- -l)b=!0;break;case "move-diagonal-right-down":if(f.left- -g-100-k>=c.left||f.top- -h-m>=c.top)b=!0;break;case "move-diagonal-right-up":if(f.left- -g-100-k>=c.left||f.top- -0-m<=c.top- -l)b=!0;break;case "scroll-down":f.top- -h-m>=c.top&&(b=!0);break;case "scroll-up":f.top- -0-m<=c.top- -l&&(b=!0);break;case "scroll-right":f.left-
-g-100-k>=c.left&&(b=!0);break;case "scroll-left":f.left- -70- -k<=c.left- -j&&(b=!0)}}return b}function getOffsetRect(c){return c.getBoundingClientRect()};
