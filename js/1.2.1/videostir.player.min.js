/*
 VideoStir player JavaScript library.
 @author Alexey Bass (@alexey_bass)
 @copyright http://videostir.com
*/
"undefined"===typeof VideoStir&&"undefined"!==typeof window.log&&console.log("VideoStir object is not found, probably frameworks JS file is missing.");VideoStir.jQuery(document).ready(function(){VideoStir.Player.init()});
VideoStir.Player={Version:"1.2.1",_containerId:"videostir-player",_containerInnerId:"videostir-player-inner",_preloadContainerId:"videostir-player-preload",_playerUrl:"http://8b249279a23ebe6382fe-bdbb90f389a017a4d0321ddd645160f1.r73.cf1.rackcdn.com/swf/121129/videostir.player.swf",_hooks:{"video-loaded":[]},init:function(){},parseLegacyVideo:function(c){if(-1!==c.indexOf("://videostir.com/")){var d=c.match(/\/go\/video\/(\w{32})/);return d&&2==d.length?d[1]:c}return c},show:function(c,d,a,b,e){e=
e||{};VideoStir.Player.isExists()&&VideoStir.Player.remove();var b=VideoStir.Player.parseLegacyVideo(b),h=new VideoStir.Player.Cookie(b),i=h.getViewsCount();if(e["disable-player-threshold"]){if(i>=e["disable-player-threshold"])return;delete e["disable-player-threshold"]}e.videostir_views=i;var f=VideoStir.Player.makeCss(c,d,a),g=VideoStir.Player.makePlayerParams(b,e);VideoStir.jQuery(document).ready(function(){VideoStir.jQuery("body").append('<div id="'+VideoStir.Player._containerId+'"></div>');var b=
VideoStir.jQuery("#"+VideoStir.Player._containerId);b.css(f);var c="",e;for(e in f)c+=e+": "+f[e]+"; ";VideoStir.jQuery.browser.msie&&(VideoStir.swfobject.createCSS("#"+VideoStir.Player._containerId,c),document.getElementById(VideoStir.Player._containerId).setAttribute("style",c));b.append('<div id="'+VideoStir.Player._containerInnerId+'"></div>');VideoStir.swfobject.embedSWF(VideoStir.Player.getPlayerUrl(VideoStir.Player.isSecure()),VideoStir.Player._containerInnerId,d,a,"9.0.0","",g.flashvars,g.params,
g.attributes);h.addViewsCount()})},createPreloadContainer:function(){0==VideoStir.Player._preloadContainerCounter&&VideoStir.jQuery("body").append('<div id="'+VideoStir.Player._preloadContainerId+'"></div>')},removePreloadContainer:function(){var c=VideoStir.jQuery("#"+VideoStir.Player._preloadContainerId);if(c.length){for(var d=c.find("> *"),a=0,b=d.length;a<b;a++)VideoStir.swfobject.removeSWF(VideoStir.jQuery(d[a]).attr("id"));c.remove()}},_preloadContainerCounter:0,addPreloadingItemContainer:function(){VideoStir.Player._preloadContainerCounter++;
var c=VideoStir.Player._preloadContainerId+"-item-"+VideoStir.Player._preloadContainerCounter;VideoStir.jQuery("#"+VideoStir.Player._preloadContainerId).append('<div id="'+c+'"></div>');return c},on:function(c,d){return{show:function(){var a=arguments;VideoStir.Player.createPreloadContainer();VideoStir.swfobject.embedSWF(VideoStir.Player.getPlayerUrl(VideoStir.Player.isSecure()),VideoStir.Player.addPreloadingItemContainer(),1,1,"9.0.0","",{videoHash:VideoStir.Player.parseLegacyVideo(a[3]),https:VideoStir.Player.isSecure()?
1:0,autop:!1},{menu:"false"},{menu:"false"});VideoStir.jQuery(c).on(d,function(){VideoStir.Player.removePreloadContainer();VideoStir.Player.show.apply(VideoStir.Player,a)})}}},remove:function(){VideoStir.swfobject.removeSWF(VideoStir.Player._containerInnerId);VideoStir.jQuery("#"+VideoStir.Player._containerId).remove()},isExists:function(){return VideoStir.jQuery("#"+VideoStir.Player._containerId).length?!0:!1},makeCss:function(c,d,a){var b={left:"auto",top:"auto",right:"auto",bottom:"auto",position:"fixed",
"z-index":"1000000",margin:"0",padding:"0",width:d+"px",height:a+"px"};if("string"===typeof c)switch(c){case "top-left":b.top="0px";b.left="0px";break;case "top-right":b.top="0px";b.right="0px";break;case "bottom-left":b.bottom="0px";b.left="0px";break;case "bottom-right":b.bottom="0px";b.right="0px";break;case "center":c=VideoStir.jQuery(window),b.left=(c.width()-d)/2+c.scrollLeft()+"px",b.top=(c.height()-a)/2+c.scrollTop()+"px",b.right="auto",b.bottom="auto"}else if("object"===typeof c){for(var e in c)switch(e){case "left":case "top":case "right":case "bottom":c[e]=
String(c[e]),!isNaN(parseFloat(c[e]))&&isFinite(c[e])&&(c[e]+="px")}VideoStir.jQuery.extend(b,c)}else b.left="0px",b.top="0px";VideoStir.jQuery.browser.msie&&"BackCompat"==document.compatMode&&(b.top.length&&"auto"!=b.top?(b.position="absolute !important",b.top='expression(((document.documentElement.scrollTop || document.body.scrollTop) + (!this.offsetHeight && 0)) + "px")'):b.bottom.length&&"auto"!=b.bottom&&(b.position="absolute !important",b.top='expression(((document.documentElement.scrollTop || document.body.scrollTop) + (document.documentElement.clientHeight || document.body.clientHeight) - this.offsetHeight) + "px")',
b.bottom="auto"));return b},makePlayerParams:function(c,d){var a={flashvars:{},params:{},attributes:{}};a.flashvars.videoHash=c;a.flashvars.https=VideoStir.Player.isSecure()?1:0;a.flashvars.videostir_referer=encodeURIComponent(VideoStir.Player.getReferrer());a.params.wmode="transparent";a.params.quality="high";a.params.allowScriptAccess="always";a.params.menu=!1;a.attributes.wmode="transparent";a.attributes.quality="high";a.attributes.allowScriptAccess="always";a.attributes.menu=!1;for(var b in d)switch(b){case "auto-play":a.flashvars.autop=
d[b];break;case "auto-play-limit":a.flashvars.maxPlayedTimes=d[b];break;case "playback-delay":a.flashvars.delayS=d[b];break;case "on-finish":switch(d[b]){case "remove":a.flashvars.afterDone="close";break;case "play-button":a.flashvars.afterDone="bigPlayButton";break;case "blank":a.flashvars.afterDone="empty"}break;case "rotation":a.flashvars.rotationG=d[b];break;case "zoom":a.flashvars.zoomPerc=d[b]/100;break;case "offset-x":a.flashvars.offsetOnX=d[b];break;case "offset-y":a.flashvars.offsetOnY=d[b];
break;case "on-click-open-url":a.flashvars.linkTo=!0;a.flashvars.goButtonUrl=encodeURIComponent(0===d[b].indexOf("http")?d[b]:"http://"+d[b]);break;case "on-click-open-url-target":switch(d[b]){case "blank":a.flashvars.goButtonLogic="newWindow";break;case "self":a.flashvars.goButtonLogic="sameWindow"}break;case "on-click-open-url-button-position":a.flashvars.goButtonFrame=1;switch(d[b]){case "left":case "center":case "right":a.flashvars.goButtonLocation=d[b]}break;case "aspect-ratio":switch(d[b]){case "16:9":case "4:3":VideoStir.Player._hooks["video-loaded"].push("aspect-ratio="+
d[b])}break;case "clip-fps":a.flashvars.clipFps=d[b];break;case "playback-freeze-frame":a.flashvars.freeze=d[b];break;default:a.flashvars[b]=d[b]}a.flashvars.freeze&&(a.flashvars.autop=!0,a.flashvars.maxPlayedTimes=1E4);return a},getReferrer:function(){return window.location.href},getPlayerUrl:function(c){return c?"https"+VideoStir.Player._playerUrl.replace(/\.r[0-9]{2}\./,".ssl.").substr(4):VideoStir.Player._playerUrl},getHooks:function(c){return VideoStir.Player._hooks[c]?VideoStir.Player._hooks[c]:
[]},setAspectRatio:function(c){try{var d=VideoStir.swfobject.getObjectById(VideoStir.Player._containerInnerId),a=VideoStir.jQuery("#"+VideoStir.Player._containerInnerId).width();setTimeout(function(){switch(c){case "16:9":d.resizeMovie(a,Math.round(a/1.77));break;case "4:3":d.resizeMovie(a,Math.round(a/1.33))}},100)}catch(b){}},isSecure:function(){return"https:"==document.location.protocol?!0:!1}};
VideoStir.Player.callback={movieLoaded:function(){var c=VideoStir.Player.getHooks("video-loaded");if(c.length){var d,a;for(d in c)switch(a=c[d].split("="),a[0]){case "aspect-ratio":VideoStir.Player.setAspectRatio(a[1])}}}};VideoStir.Player.Cookie=function(c){var d,a;this.getViewsCount=function(){return a?a:0};this.addViewsCount=function(b){b=b||1;VideoStir.jQuery.cookie(d,a+b,{expires:365});a+=b};d="vsv"+c;a=(a=VideoStir.jQuery.cookie(d))?parseInt(a):0};
